<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Look Up Drink</title>
</head>

<body>

  <!-- Drink Select Box -->
  <form id="drink-form">

    <!-- Label for Text Box -->
    <label for="drink-input">Choose Your Drink</label>

    <!-- Text Input Box -->
    <input type="text" id="drink-input"><br>

    <!-- Submit Button -->
    <input id="select-drink" type="submit" value="GO!">
  </form>

  <!-- Drink Information -->
  <div id="drink-div"></div>

    <!-- Ingredient Select Box -->
    <form id="ingredient-form">

      <!-- Label for Text Box -->
      <label for="ingredient-input">Choose Your Ingredient</label>
  
      <!-- Text Input Box -->
      <input type="text" id="ingredient-input"><br>
  
      <!-- Submit Button -->
      <input id="select-ingredient" type="submit" value="GO!">
    </form>
  
    <!-- Artist Information -->
    <div id="ingredient-div"></div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
  function searchCocktailDB(drink) {
     // process.env.API_COCKTAIL
    // Querying the Cocktail DB api for the selected drink, the ?app_id parameter is required, but can equal anything
    var queryURL = "https://www.thecocktaildb.com/api/json/v2/9973533/search.php?s=" + drink;
    $.ajax({
      url: queryURL,
      method: "GET"
    }).then(function(response) {

         // Printing the entire object to console
      console.log('A', response);
      console.log('B', response.drinks.length)
      // Constructing HTML containing the drink information
      for(i=0; i<response.drinks.length; i++){
        console.log('C', i);
        var drinkName = $("<h1>").text(response.drinks[i]['strDrink']);
        let ingredientString = ''
        let strIngrediant = 'strIngredient' + (i+1)
        if (response.drinks[i]['strIngredient1']) {
          ingredientString += response.drinks[i]['strIngredient1']
        }
        
        if (response.drinks[i][strIngrediant]) {
          ingredientString += ', ' + response.drinks[i][strIngrediant]
        }

        var ingredients = $("<h2>").text(ingredientString)
        var directions = $("<h2>").text(response.drinks[i]['strInstructions']);
        var drinkImage = $("<img>").attr("src", response.drinks[i]['strDrinkThumb']);
          
        // Empty the contents of the drink-div, append the new drink content
        //$("#drink-div").empty();
        $("#drink-div").append(drinkName, ingredients, directions, drinkImage); 
      }
    });
  }

  // Event handler for user clicking the select-drink button
  $("#select-drink").on("click", function(event) {
    // Preventing the button from trying to submit the form
    event.preventDefault();
    // Storing the drink name
    var inputDrink = $("#drink-input").val().trim();

    // Running the searchCocktailDB function(passing in the artist as an argument)
    searchCocktailDB(inputDrink);
  });



  function searchCocktailDBByIngredient(ingredient) {
// process.env.API_COCKTAIL
// Querying the Cocktail DB api for the selected drink, the ?app_id parameter is required, but can equal anything
var queryURL = "https://www.thecocktaildb.com/api/json/v2/9973533/search.php?s=" + ingredient;
$.ajax({
  url: queryURL,
  method: "GET"
}).then(function(response) {

        // Printing the entire object to console
        console.log('A', response);
      console.log('B', response.drinks.length)
      // Constructing HTML containing the drink information
      for(i=0; i<response.drinks.length; i++){
        console.log('C', i);
        var drinkName = $("<h1>").text(response.drinks[i]['strDrink']);
        let ingredientString = ''
        
        if (response.drinks[i]['strIngredient1']) {
          ingredientString += response.drinks[i]['strIngredient1']
        }
        
        if (response.drinks[i]['strIngredient2']) {
          ingredientString += ', ' + response.drinks[i]['strIngredient2']
        }
        
        if (response.drinks[i]['strIngredient3']) {
          ingredientString += ', ' + response.drinks[i]['strIngredient3']
        }
        
        if (response.drinks[i]['strIngredient4']) {
          ingredientString += ', ' + response.drinks[i]['strIngredient4']
        }
        
        if (response.drinks[i]['strIngredient5']) {
          ingredientString += ', ' + response.drinks[i]['strIngredient5']
        }

        if (response.drinks[i]['strIngredient6']) {
          ingredientString += ', ' + response.drinks[i]['strIngredient5']
        }

        if (response.drinks[i]['strIngredient7']) {
          ingredientString += ', ' + response.drinks[i]['strIngredient5']
        }

        if (response.drinks[i]['strIngredient8']) {
          ingredientString += ', ' + response.drinks[i]['strIngredient5']
        }

        if (response.drinks[i]['strIngredient9']) {
          ingredientString += ', ' + response.drinks[i]['strIngredient5']
        }

        if (response.drinks[i]['strIngredient10']) {
          ingredientString += ', ' + response.drinks[i]['strIngredient5']
        }

        if (response.drinks[i]['strIngredient11']) {
          ingredientString += ', ' + response.drinks[i]['strIngredient5']
        }

        if (response.drinks[i]['strIngredient12']) {
          ingredientString += ', ' + response.drinks[i]['strIngredient5']
        }

        if (response.drinks[i]['strIngredient13']) {
          ingredientString += ', ' + response.drinks[i]['strIngredient5']
        }

        if (response.drinks[i]['strIngredient14']) {
          ingredientString += ', ' + response.drinks[i]['strIngredient5']
        }

        if (response.drinks[i]['strIngredient15']) {
          ingredientString += ', ' + response.drinks[i]['strIngredient5']
        }
       
        
        var ingredients = $("<h2>").text(ingredientString)
        var directions = $("<h2>").text(response.drinks[i]['strInstructions']);
        var drinkImage = $("<img>").attr("src", response.drinks[i]['strDrinkThumb']);
          
        // Empty the contents of the drink-div, append the new drink content
        //$("#drink-div").empty();
        $("#drink-div").append(drinkName, ingredients, directions, drinkImage); 
      }
    });
  }

  // Event handler for user clicking the select-drink button
  $("#select-ingredient").on("click", function(event) {
    // Preventing the button from trying to submit the form
    event.preventDefault();
    // Storing the drink name
    var inputIngredient = $("#ingredient-input").val().trim();

    // Running the searchCocktailDB function(passing in the artist as an argument)
    searchCocktailDBByIngredient(inputIngredient);
  });
</script>

</html>
